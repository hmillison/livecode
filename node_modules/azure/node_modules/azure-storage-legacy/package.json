{
  "name": "azure-storage-legacy",
  "author": {
    "name": "Microsoft Corporation"
  },
  "contributors": [
    {
      "name": "Block, Glenn",
      "email": "gblock@microsoft.com"
    },
    {
      "name": "Cowlishaw, Mark",
      "email": "markcowl@microsoft.com"
    },
    {
      "name": "Dejardin, Louis",
      "email": "loudej@microsoft.com"
    },
    {
      "name": "Georgiev, Yavor",
      "email": "yavorg@microsoft.com"
    },
    {
      "name": "Janczuk, Tomasz",
      "email": "tjanczuk@microsoft.com"
    },
    {
      "name": "Rodrigues, Andre",
      "email": "andrerod@microsoft.com"
    },
    {
      "name": "Tavares, Chris",
      "email": "ctavares@microsoft.com"
    }
  ],
  "version": "0.9.10",
  "description": "Microsoft Azure Storage Client Library for node for back compat with older versions of node sdk",
  "tags": [
    "azure",
    "sdk"
  ],
  "keywords": [
    "node",
    "azure"
  ],
  "main": "./lib/storage.js",
  "engines": {
    "node": ">= 0.6.15"
  },
  "licenses": [
    {
      "type": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0"
    }
  ],
  "dependencies": {
    "azure-common": "0.9.7",
    "underscore": "1.4.x"
  },
  "homepage": "http://github.com/Azure/azure-sdk-for-node",
  "repository": {
    "type": "git",
    "url": "git@github.com:Azure/azure-sdk-for-node.git"
  },
  "bugs": {
    "url": "http://github.com/Azure/azure-sdk-for-node/issues"
  },
  "scripts": {
    "test": "npm -s run-script jshint"
  },
  "readme": "# Microsoft Azure SDK for Node.js - Legacy Storage\r\n\r\nThis project provides a Node.js package that lets you consume Azure storage services.\r\nThis package exists to provide back compatibility with previous versions of the azure\r\nsdk for node. New application should instead use <<TODO>>.\r\n\r\n- **Node.js version: 0.6.15 or higher**\r\n- **API version: 2013-03-01**\r\n\r\n## Features\r\n\r\n- Blob client\r\n- Table Store client\r\n- Queue client\r\n\r\n## How to Install\r\n\r\n```bash\r\nnpm install azure-storage-legacy\r\n```\r\n\r\n## How to Use\r\n\r\n## Usage\r\n\r\n### Table Storage\r\n\r\nTo ensure a table exists, call **createTableIfNotExists**:\r\n\r\n```Javascript\r\nvar tableService = storage.createTableService();\r\ntableService.createTableIfNotExists('tasktable', function(error){\r\n    if(!error){\r\n        // Table exists\r\n    }\r\n});\r\n```\r\nA new entity can be added by calling **insertEntity**:\r\n\r\n```Javascript\r\nvar tableService = storage.createTableService(),\r\n    task1 = {\r\n        PartitionKey : 'tasksSeattle',\r\n        RowKey: '1',\r\n        Description: 'Take out the trash',\r\n        DueDate: new Date(2011, 12, 14, 12)\r\n    };\r\ntableService.insertEntity('tasktable', task1, function(error){\r\n    if(!error){\r\n        // Entity inserted\r\n    }\r\n});\r\n```\r\n\r\nThe method **queryEntity** can then be used to fetch the entity that was just inserted:\r\n\r\n```Javascript\r\nvar tableService = storage.createTableService();\r\ntableService.queryEntity('tasktable', 'tasksSeattle', '1', function(error, serverEntity){\r\n    if(!error){\r\n        // Entity available in serverEntity variable\r\n    }\r\n});\r\n```\r\n\r\n## Blob Storage\r\n\r\nThe **createContainerIfNotExists** method can be used to create a\r\ncontainer in which to store a blob:\r\n\r\n```Javascript\r\nvar blobService = storage.createBlobService();\r\nblobService.createContainerIfNotExists('taskcontainer', {publicAccessLevel : 'blob'}, function(error){\r\n    if(!error){\r\n        // Container exists and is public\r\n    }\r\n});\r\n```\r\n\r\nTo upload a file (assuming it is called task1-upload.txt and it is placed in the same folder as the script below), the method **createBlob** can be used. This method will return a writable stream which can be writen to, for instance, through piping:\r\n\r\n```Javascript\r\nvar blobService = storage.createBlobService();\r\n\r\nfs.createReadStream('task1-upload.txt').pipe(blobService.createBlob('taskcontainer', 'task1', storage.Constants.BlobConstants.BlobTypes.BLOCK));\r\n```\r\n\r\nTo download the blob and write it to the file system, a similar **getBlob** method can be used:\r\n\r\n```Javascript\r\nvar blobService = storage.createBlobService();\r\n\r\nblobService.getBlob('taskcontainer', 'task1').pipe(fs.createWriteStream('task1-download.txt'));\r\n```\r\n\r\nTo create a SAS URL you can use the **getBlobUrl** method. Additionally you can use the **date** helper functions to easily create a SAS that expires at some point relative to the current time.\r\n\r\n```Javascript\r\nvar blobService = storage.createBlobService();\r\n\r\n//create a SAS that expires in an hour\r\nvar sharedAccessPolicy = {\r\n    AccessPolicy: {\r\n        Expiry: storage.date.minutesFromNow(60);\r\n    }\r\n};\r\n\r\nvar sasUrl = blobService.getBlobUrl(containerName, blobName, sharedAccessPolicy);\r\n```\r\n\r\n## Storage Queues\r\n\r\nThe **createQueueIfNotExists** method can be used to ensure a queue exists:\r\n\r\n```Javascript\r\nvar queueService = storage.createQueueService();\r\nqueueService.createQueueIfNotExists('taskqueue', function(error){\r\n    if(!error){\r\n        // Queue exists\r\n    }\r\n});\r\n```\r\n\r\nThe **createMessage** method can then be called to insert the message into the queue:\r\n\r\n```Javascript\r\nvar queueService = storage.createQueueService();\r\nqueueService.createMessage('taskqueue', 'Hello world!', function(error){\r\n    if(!error){\r\n        // Message inserted\r\n    }\r\n});\r\n```\r\n\r\nIt is then possible to call the **getMessage** method, process the message and then call **deleteMessage** inside the callback. This two-step process ensures messages don't get lost when they are removed from the queue.\r\n\r\n```Javascript\r\nvar queueService = storage.createQueueService(),\r\n    queueName = 'taskqueue';\r\nqueueService.getMessages(queueName, function(error, serverMessages){\r\n    if(!error){\r\n        // Process the message in less than 30 seconds, the message\r\n        // text is available in serverMessages[0].messagetext\r\n\r\n        queueService.deleteMessage(queueName, serverMessages[0].messageid, serverMessages[0].popreceipt, function(error){\r\n            if(!error){\r\n                // Message deleted\r\n            }\r\n        });\r\n    }\r\n});\r\n```\r\n\r\n## Related projects\r\n\r\n- [Microsoft Azure SDK for Node.js](https://github.com/WindowsAzure/azure-sdk-for-node)\r\n- [Microsoft Azure SDK for Node.js - Storage Blob](https://github.com/WindowsAzure/azure-sdk-for-node/tree/master/lib/services/blob)\r\n- [Microsoft Azure SDK for Node.js - Storage Table](https://github.com/WindowsAzure/azure-sdk-for-node/tree/master/lib/services/table)\r\n- [Microsoft Azure SDK for Node.js - Storage Queue](https://github.com/WindowsAzure/azure-sdk-for-node/tree/master/lib/services/queue)\r\n",
  "readmeFilename": "README.md",
  "_id": "azure-storage-legacy@0.9.10",
  "dist": {
    "shasum": "fa1a160ef91c0dc69f98f3670987e235cb0789f2"
  },
  "_from": "azure-storage-legacy@0.9.10",
  "_resolved": "https://registry.npmjs.org/azure-storage-legacy/-/azure-storage-legacy-0.9.10.tgz"
}
